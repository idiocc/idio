<types namespace="_idio">
  <import from="../types/options" ns="_idio" name="CorsOptions" />
  <import from="../types/modules/cors" ns="_goa" name="CorsConfig" />

  <import from="../types/options" ns="_idio" name="StaticOptions" />
  <import from="../types/modules" ns="_idio" name="KoaStaticConfig" />

  <import from="../types/options" ns="_idio" name="CompressOptions" />
  <import from="../types/modules" ns="_idio" name="KoaCompressConfig" />

  <import from="../types/options" ns="_idio" name="SessionOptions" />
  <import from="../types/modules/session" ns="_idio" name="KoaSessionConfig" />

  <import from="../" ns="_goa" name="Middleware" />
  <import from="../" ns="_goa" name="Application" />

  <record name="MiddlewareConfig"
    desc="Middleware configuration for the `idio` server."
    extends="_idio.FnMiddlewareConfig">
    <prop opt type="_idio.StaticOptions" name="static">
      `koa-static` options.
    </prop>
    <prop opt type="_idio.CompressOptions" name="compress">
      `koa-compress` options.
    </prop>
    <prop opt type="_idio.SessionOptions" name="session">
      `koa-session` options.
    </prop>
    <prop opt type="_idio.CorsOptions" name="cors">
      `koa-cors` options.
    </prop>
  </record>
  <type type="!Object<string, !_idio.ConfigItem>" name="FnMiddlewareConfig" desc="Middleware Config With Functions.">
  </type>

  <type type="!_goa.Middleware|{ use: boolean, middlewareConstructor: !_idio.MiddlewareConstructor, config: !Object }" name="ConfigItem" desc="An item in middleware configuration."/>

  <method name="MiddlewareConstructor" async return="!_goa.Middleware">
    <arg type="!_goa.Application" name="app">The application instance.</arg>
    <arg type="!Object" name="config">The config for the item.</arg>
    <arg type="!Object" name="options">Any other additional middleware options.</arg>
    A function used to create middleware.
  </method>
</types>
